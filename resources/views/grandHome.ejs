<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script type="text/partytown" src="https://use.fontawesome.com/826a7e3dce.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<!-- Swiper's CSS -->
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>



<!--Category Navigation Bar-->

<div style="justify-content: space-evenly; " class="w-full h-20 sm:h-28 flex content-center mt-2">
    <% nashta.forEach(function(nashta){ %>
        <a href="/Category/<%= nashta.pcategory %>/<%= nashta._id%>/1">
            <div data-chai="<%= JSON.stringify(nashta) %>" style="display: flex;" class="sub-cat">
                <div class="dropdown  relative  flex justify-center items-center" style=" flex-direction: column;">
                    <button class="text-gray-700 font-semibold  rounded inline-flex items-center">
                        <span class="">
                            <lottie-player src="<%= nashta.pimage %>" class="w-12 h-12 md:w-20 md:h-20"
                                background="transparent" speed="1" loop autoplay></lottie-player>
                        </span>
                    </button>
                    <h1 class="text-center font-medium text-xxs sm:text-xs ">
                        <%= nashta.pcategory %>
                    </h1>
                    <ul class="dropdown-menu absolute hidden text-gray-700 pt-1">
                    </ul>
                </div>
            </div>
        </a>
        <% }) %>
</div>






<div class="container mx-auto py-9 md:py-12 px-4 md:px-6">
    <div
        class="flex items-strech justify-center flex-col md:flex-row space-y-1 md:space-y-0 md:space-x-4 lg:space-x-2 md:h-52 lg:h-72">
        <div class="flex flex-col md:flex-row items-strech   md:w-9/12 lg:w-7/12 xl:w-3/4 ">
            <div class="flex justify-center w-full cursor-pointer"
                onclick="location.href = '/allcategory/products?search=polylab'">

                <img src="/img/banners/bighulk1.webp" alt="bannerUp" class="w-full xl:object-cover" />

            </div>
        </div>
        <div class="md:w-4/12 lg:w-5/12 xl:w-4/12 2xl:w-3/12   flex md:flex-col flex-row justify-center">
            <!-- <div style="border: 2px solid black;" class="flex flex-col justify-center"> -->
            <img src="/img/banners/Jsil Discount.webp" alt="postQueryImg"
                class="w-1/2 h-20 sm:h-28 md:h-28 lg:h-40 md:w-full mx-auto md:mb-1 cursor-pointer"
                onclick="location.href = '/allcategory/products?search=j-sil'" />

            <img src="/img/banners/5-Recovered.webp" alt="postQueryImg"
                class="w-1/2 h-20 sm:h-28 md:h-28 lg:h-40 md:w-full mx-auto md:mt-1 cursor-pointer"
                onclick="location.href = '/allcategory/products?search=lancer'" />
            <!-- </div> -->
        </div>
    </div>
</div>





<h1 class="heading shadow-sm mt-3 ml-5 sm:ml-3">Plasticware</h1>

<!-- ====== Cards Section Start -->
<section class="sm:container pt-4 mx-auto flex flex-wrap justify-around shadow-sm">
    <div class="owl-carousel owl-carousel-big">


        <% plastu.forEach((product)=> { %>
            <div class="flex flex-col items-center gap-2 px-2 relative">

                <a href="/productDetails/<%= product.pname %>/<%= product._id %>/1"
                    class="flex flex-col items-center text-center group">
                    <div class="w-20 sm:w-36 sm:h-36">
                        <img draggable="false" class="w-full h-full object-contain"
                            src="/img/<%= product.image[0].imgName %>" alt="{name}" />
                    </div>
                    <% if(product.variationname !='' && product.variationname !='undefined' && product.variationname
                        !=null && product.piecePerPack> 1) { %>
                        <h2 class="text-sm mt-4 group-hover:text-blue-500">
                            <%= product.pname %> - <%= product.variationname %> (<%= product.piecePerPack %> Pcs)
                        </h2>
                        <% } else if(product.variationname !='' && product.variationname !='undefined' &&
                            product.variationname !=null) {%>
                            <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                <%= product.pname %> - <%= product.variationname %>
                            </h2>
                            <% } else { %>
                                <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                    <%= product.pname %>
                                </h2>
                                <% } %>
                                    <span class="text-gray-400 text-xs ">Brand: <%= product.brand.name %></span>

                                    <div class="flex flex-col items-center">
                                        <%if(product.reviews.length> 0){%>
                                            <span class="text-sm text-gray-500 font-medium flex gap-2 items-center">
                                                <span style="background-color: #388e3c;"
                                                    class="text-xs px-1.5 py-0.5 mt-2 rounded-sm text-white flex items-center gap-0.5">
                                                    <%=product.avgrating.toFixed(1)%><img
                                                            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMiI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTYuNSA5LjQzOWwtMy42NzQgMi4yMy45NC00LjI2LTMuMjEtMi44ODMgNC4yNTQtLjQwNEw2LjUuMTEybDEuNjkgNC4wMSA0LjI1NC40MDQtMy4yMSAyLjg4Mi45NCA0LjI2eiIvPjwvc3ZnPg=="
                                                            class="_1wB99o">
                                                </span>
                                                <span>(<%=product.reviews.length%>)</span>
                                            </span>

                                            <%}%>
                                                <div class="flex items-center gap-3 text-sm md:text-md font-medium p-2">

                                                    <span>₹<%= Math.ceil((product.price * product.piecePerPack) -
                                                            ((product.price *
                                                            product.piecePerPack)*(product.brand.discount)/100)) %>
                                                    </span>

                                                    <span class="text-gray-500 line-through text-xs hidden sm:block">₹
                                                        <%= product.price * product.piecePerPack %>
                                                    </span>
                                                    <span class="text-xs font-medium text-lime-500">
                                                        <%= product.brand.discount %>%&nbsp;off
                                                    </span>
                                                </div>


                                    </div>

                                    <!-- <span onClick={addToWishlistHandler} class={`${itemInWishlist ? "text-red-500" : "hover:text-red-500 text-gray-300"} absolute top-5 right-2 cursor-pointer`}><svg xmlns="http://www.w3.org/2000/svg" class="_1l0elc" width="16" height="16" viewBox="0 0 20 16"><path d="M8.695 16.682C4.06 12.382 1 9.536 1 6.065 1 3.219 3.178 1 5.95 1c1.566 0 3.069.746 4.05 1.915C10.981 1.745 12.484 1 14.05 1 16.822 1 19 3.22 19 6.065c0 3.471-3.06 6.316-7.695 10.617L10 17.897l-1.305-1.215z" fill="#2874F0" class="eX72wL" stroke="#FFF" fill-rule="evenodd" opacity=".9"></path></svg></span> -->
                </a>

            </div>
            <% }) %>

    </div>
</section>
<!-- ====== Cards Section End -->

<h1 class="heading shadow-sm ml-5 sm:ml-3">Glassware</h1>

<!-- ====== Cards Section Start -->
<section class="sm:container pt-4 mx-auto flex flex-wrap justify-around shadow-sm">
    <div class="owl-carousel owl-carousel-big">

        <% products.forEach((product)=> { %>
            <div class="flex flex-col items-center gap-2 px-2 relative">
                <a href="/productDetails/<%= product.pname %>/<%= product._id %>/1"
                    class="flex flex-col items-center text-center group">
                    <div class="w-20 sm:w-36 sm:h-36">
                        <img draggable="false" class="w-full h-full object-contain"
                            src="/img/<%= product.image[0].imgName %>" alt="<%= product.pname %>" />
                    </div>


                    <% if(product.variationname !='' && product.variationname !='undefined' && product.variationname
                        !=null && product.piecePerPack> 1) { %>
                        <h2 class="text-sm mt-4 group-hover:text-blue-500">
                            <%= product.pname %> - <%= product.variationname %> (<%= product.piecePerPack %> Pcs)
                        </h2>
                        <% } else if(product.variationname !='' && product.variationname !='undefined' &&
                            product.variationname !=null) {%>
                            <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                <%= product.pname %> - <%= product.variationname %>
                            </h2>
                            <% } else { %>
                                <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                    <%= product.pname %>
                                </h2>
                                <% } %>


                                    <span class="text-gray-400 text-xs ">Brand: <%= product.brand.name %></span>
                                    <div class="flex flex-col items-center">

                                        <div class="flex items-center gap-3 text-sm md:text-md font-medium p-2">
                                            <span>₹<%= Math.ceil((product.price * product.piecePerPack) -
                                                    ((product.price *
                                                    product.piecePerPack)*(product.brand.discount)/100)) %></span>
                                            <span class="text-gray-500 line-through text-xs hidden sm:block">₹<%=
                                                    product.price * product.piecePerPack %>
                                            </span>
                                            <span class="text-xs font-medium text-lime-500">
                                                <%= product.brand.discount %>%&nbsp;off
                                            </span>
                                        </div>


                                    </div>
                                    <!-- <span onClick={addToWishlistHandler} class={`${itemInWishlist ? "text-red-500" : "hover:text-red-500 text-gray-300"} absolute top-5 right-2 cursor-pointer`}><svg xmlns="http://www.w3.org/2000/svg" class="_1l0elc" width="16" height="16" viewBox="0 0 20 16"><path d="M8.695 16.682C4.06 12.382 1 9.536 1 6.065 1 3.219 3.178 1 5.95 1c1.566 0 3.069.746 4.05 1.915C10.981 1.745 12.484 1 14.05 1 16.822 1 19 3.22 19 6.065c0 3.471-3.06 6.316-7.695 10.617L10 17.897l-1.305-1.215z" fill="#2874F0" class="eX72wL" stroke="#FFF" fill-rule="evenodd" opacity=".9"></path></svg></span> -->
                </a>
            </div>
            <% }) %>

    </div>
</section>
<!-- ====== Cards Section End -->














<div class="sm:container  pt-6 pb-6  mx-auto ">
    <div class="flex flex-col justify-center items-strech  contain   md:flex-row space-y-4md:space-y-0 md:space-x-3 ">
        <div class="w-full">
            <a href="/allcategory">
                <img style=" object-fit: cover; width:100%;" class="h-1/4 sm:h-96" src="/img/banners/bannerbig.webp"
                    alt="promotional-banner" srcset="">
            </a>
        </div>
    </div>
</div>


<!-- <h1 class="heading shadow-sm ml-5 sm:ml-3">Chemicals</h1> -->

<!-- ====== Cards Section Start -->
<!-- <section class="sm:container pt-4 mx-auto flex flex-wrap justify-around shadow-sm">
    <div class="owl-carousel owl-carousel-big">

        <% chemicals.forEach((product)=> { %>
            <div class="flex flex-col items-center gap-2 px-2 relative">
                <a href="/productDetails/<%= product.pname %>/<%= product._id %>/1"
                    class="flex flex-col items-center text-center group">
                    <div class="w-20 sm:w-36 sm:h-36">
                        <img draggable="false" class="w-full h-full object-contain"
                            src="/img/<%= product.image[0].imgName %>" alt="{name}" />
                    </div>


                    <% if(product.variationname !='' && product.variationname !='undefined' && product.variationname
                        !=null && product.piecePerPack> 1) { %>
                        <h2 class="text-sm mt-4 group-hover:text-blue-500">
                            <%= product.pname %> - <%= product.variationname %> (<%= product.piecePerPack %> Pcs)
                        </h2>
                        <% } else if(product.variationname !='' && product.variationname !='undefined' &&
                            product.variationname !=null) {%>
                            <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                <%= product.pname %> - <%= product.variationname %>
                            </h2>
                            <% } else { %>
                                <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                    <%= product.pname %>
                                </h2>
                                <% } %>


                                    <span class="text-gray-400 text-xs ">Brand: <%= product.brand.name %></span>
                                    <div class="flex flex-col items-center">
                                        <%if(product.reviews.length> 0){%>
                                            <span class="text-sm text-gray-500 font-medium flex gap-2 items-center">
                                                <span style="background-color: #388e3c;"
                                                    class="text-xs px-1.5 py-0.5 mt-2 rounded-sm text-white flex items-center gap-0.5">
                                                    <%=product.avgrating.toFixed(1)%><img
                                                            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMiI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTYuNSA5LjQzOWwtMy42NzQgMi4yMy45NC00LjI2LTMuMjEtMi44ODMgNC4yNTQtLjQwNEw2LjUuMTEybDEuNjkgNC4wMSA0LjI1NC40MDQtMy4yMSAyLjg4Mi45NCA0LjI2eiIvPjwvc3ZnPg=="
                                                            class="_1wB99o">
                                                </span>
                                                <span>(<%=product.reviews.length%>)</span>
                                            </span>
                                            <%}%>
                                                <div class="flex items-center gap-3 text-sm md:text-md font-medium p-2">
                                                    <span>₹<%= Math.ceil((product.price * product.piecePerPack) -
                                                            ((product.price *
                                                            product.piecePerPack)*(product.brand.discount)/100)) %>
                                                    </span>
                                                    <span class="text-gray-500 line-through text-xs hidden sm:block">₹
                                                        <%= product.price * product.piecePerPack %>
                                                    </span>
                                                    <span class="text-xs font-medium text-lime-500">
                                                        <%= product.brand.discount %>%&nbsp;off
                                                    </span>
                                                </div>


                                    </div>
                                    
                </a>
            </div>
            <% }) %>

    </div>
</section> -->
<!-- ====== Cards Section End -->







<!-- <h1 class="heading shadow-sm ml-5 sm:ml-3">Latest Products</h1> -->


<!-- ====== Cards Section Start -->
<!-- <section class="sm:container pt-4  shadow-sm mx-auto  flex flex-wrap justify-around">
    <div class="owl-carousel owl-carousel-big">

        <% latest.forEach((latest)=> { %>
            <div class="flex flex-col items-center gap-2 px-2 py-6 relative">
                <a href="/productDetails/<%= latest.pname %>/<%= latest._id %>/1"
                    class="flex flex-col items-center text-center group">
                    <div class="w-20  sm:w-36 sm:h-36">
                        <img draggable="false" class="w-full h-full object-contain"
                            src="/img/<%= latest.image[0].imgName %>" alt="homeImg" />
                    </div>


                    <% if(latest.variationname !='' && latest.variationname !='undefined' && latest.variationname !=null
                        && latest.piecePerPack> 1) { %>
                        <h2 class="text-sm mt-4 group-hover:text-blue-500">
                            <%= latest.pname %> - <%= latest.variationname %> (<%= latest.piecePerPack %> Pcs)
                        </h2>
                        <% } else if(latest.variationname !='' && latest.variationname !='undefined' &&
                            latest.variationname !=null) {%>
                            <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                <%= latest.pname %> - <%= latest.variationname %>
                            </h2>
                            <% } else { %>
                                <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                    <%= latest.pname %>
                                </h2>
                                <% } %>


                                    <span class="text-gray-400 text-xs ">Brand: <%= latest.brand.name %></span>
                                    <div class="flex flex-col items-center">
                                        <%if(latest.reviews.length> 0){%>
                                            <span class="text-sm text-gray-500 font-medium flex gap-2 items-center">
                                                <span style="background-color: #388e3c;"
                                                    class="text-xs px-1.5 py-0.5 mt-2 rounded-sm text-white flex items-center gap-0.5">
                                                    <%=latest.avgrating.toFixed(1)%><img
                                                            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMiI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTYuNSA5LjQzOWwtMy42NzQgMi4yMy45NC00LjI2LTMuMjEtMi44ODMgNC4yNTQtLjQwNEw2LjUuMTEybDEuNjkgNC4wMSA0LjI1NC40MDQtMy4yMSAyLjg4Mi45NCA0LjI2eiIvPjwvc3ZnPg=="
                                                            class="_1wB99o">
                                                </span>
                                                <span>(<%=latest.reviews.length%>)</span>
                                            </span>
                                            <% }%>
                                                <div
                                                    class="flex items-center gap-3 text-sm md:text-md font-medium  p-2">
                                                    <span>₹ <%= Math.ceil((latest.price * latest.piecePerPack) -
                                                            ((latest.price *
                                                            latest.piecePerPack)*(latest.brand.discount)/100)) %></span>
                                                    <span class="text-gray-500 line-through text-xs hidden sm:block">₹
                                                        <%= latest.price * latest.piecePerPack %>
                                                    </span>
                                                    <span class="text-xs font-medium text-lime-500">
                                                        <%= latest.brand.discount %>%&nbsp;off
                                                    </span>
                                                </div>


                                    </div>
                </a>
            </div>
            <% }) %>

    </div>
</section> -->
<!-- ====== Cards Section End -->






<h1 class="heading ml-5 sm:ml-3 ">Brands</h1>

<section class="flex container mx-auto mb-14 align-items flex-wrap justify-around ">

    <% brand.forEach((brandy)=> { %>
        <% if( brandy.name !="Generic" ){ %>
            <div style="justify-content: center; align-items: center; text-align: center;"
                onclick="window.location.href='/brand/<%= brandy._id %>'"
                class="flex flex-col h-24 sm:min-h-full w-36  border-box bg-white rounded xl p-3 m-3 shadow-md hover:shadow-lg cursor-pointer">
                <img  src="/img/brands/<%= brandy.simage%>" alt="" srcset=""></a>
            </div>
            <% } %>
                <% }) %>

</section>


<% if(!user){ %>
    <div aria-hidden="true" class="popup hidden overflow-y-auto overflow-x-hidden right-0 left-0 z-50 justify-center items-center h-modal md:h-full md:inset-0 fixed top-1/3 ">
        <div class="relative px-4 w-full max-w-2xl h-full md:h-auto">
            <!-- Modal content -->
            <div class="relative bg-white rounded-lg shadow border">
                <!-- Modal header -->


                <button style="border: 2px solid black;" type="button"
                    class="closed closeBtn absolute text-black bg-transparent hover:bg-gray-200 rounded-lg text-sm z-50">
                    <svg class="w-5 h-5 closed" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path>
                    </svg>
                </button>


                <!-- Modal body -->
                <div class="fle justify-center p-4 sm:p-6">

                    <img src="/img/popup-1.webp" alt="popup bachground" class="relative">
                    <div class="absolute popUpCus flex justify-around">

                        <form action="/" class="flex items-center justify-around mx-1" method="">
                            <div class="flex items-center justify-around flex-col">
                                <input id="name" name="name" type="text" class="m-1 px-1 col-span-4"
                                    placeholder="Enter Your Name">
                                <input id="phone" name="phone" type="text" class="m-1 px-1 col-span-4"
                                    placeholder="Enter Your Phone">
                                <input id="email" name="email" type="email" class="m-1 px-1 col-span-4"
                                    placeholder="Enter your email">
                            </div>
                            <div>
                                <button type="button" onclick="discountAjaxcall()"
                                    class="bg-orange-500 text-white text-sm rounded-lg my-3 p-2 mx-1">Grab</button>
                            </div>
                        </form>

                    </div>
                </div>
                <!-- Modal footer -->

            </div>
        </div>
    </div>


    <script>
        $(document).ready(function () {
            setTimeout(function () {
                $('.popup').removeClass('hidden');
                $('.popup').addClass('flex');
            }, 1000);
        });

        const popup = document.querySelector('.popup');
        const closed = document.querySelector('.closed');

        closed.addEventListener("click", popupClose);
        function popupClose() {
            popup.classList.add("hidden");
        }

        function discountAjaxcall() {
            var email = $('#email').val();
            var phone = $('#phone').val();
            var name = $('#name').val();

            if (email && phone && name) {
                if ($('#phone').val().length == 10) {
                    $.ajax({
                        url: "/getPreDiscount",
                        type: "POST",
                        data: {
                            phone: phone,
                            email: email,
                            name: name
                        }
                    }).done(function (data) {
                        if (data.msg == "Success") {
                            popup.classList.add("hidden");
                            swal({
                            title: 'Discount Approved',
                            text: 'Discount Applicable on first 3 order on register with these credentials...',
                            icon: 'success',
                            timer: 3000,
                            buttons: false,
                        })
                        } else {
                            alert(data.msg)
                        }
                    })
                } else {
                    alert("Enter 10 digit phone no.");
                }
            } else {
                alert("Enter name, phone & email")
            }
        }

    </script>
    <% } %>