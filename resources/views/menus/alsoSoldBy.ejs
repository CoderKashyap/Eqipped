<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<section class="menu container mx-auto pb-8 pt-4 min-h-full">
  <div class="shadow-sm">
    <h1  class="text-xl font-bold text-center p-5 pb-1 heading-font"><%= category.pcategory%></h1>
    <p  class="text-sm text-center text-gray-400 pb-4 ">( Showing <%= products.length%> results )</p>
    <div class="flex justify-end mr-1 md:mr-10">
        <button type="button" class="group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900" id="sort-menu-button" aria-expanded="false" aria-haspopup="true">
          Sort
          <svg class="flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </button>
        <button type="button" class="p-2 -m-2 ml-5 sm:ml-7 group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900" id="filter-menu-button" aria-expanded="false" aria-haspopup="true">
            Filter
            <svg class="flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
  
        <div id="sortDrop" class="hidden z-30 origin-top-right absolute right-0 mt-2 w-40 rounded-md  border bg-white ring-1 ring-black ring-opacity-5 focus:outline-none mr-20 mt-5 shadow-lg" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" >
            <div class="py-1" role="none">
              <a href="#" class="font-medium text-gray-500 block px-4 py-2 text-sm hover:text-gray-900" role="menuitem" tabindex="-1" id="menu-item-0"> Most Popular </a>

              <a href="#" class="text-gray-500 block px-4 py-2 text-sm hover:text-gray-900" role="menuitem" tabindex="-1" id="menu-item-1"> Best Rating </a>

              <a href="#" class="text-gray-500 block px-4 py-2 text-sm hover:text-gray-900" role="menuitem" tabindex="-1" id="menu-item-2"> Newest </a>

              <a href="#" class="text-gray-500 block px-4 py-2 text-sm hover:text-gray-900" role="menuitem" tabindex="-1" id="menu-item-3"> Price: Low to High </a>

              <a href="#" class="text-gray-500 block px-4 py-2 text-sm hover:text-gray-900" role="menuitem" tabindex="-1" id="menu-item-4"> Price: High to Low </a>
            </div>
          </div>
          <div id="FilterDrop" class="hidden z-50 mr-4 origin-top-right absolute right-0 mt-2 w-56 rounded-md  border bg-white ring-1 ring-black ring-opacity-5 focus:outline-none mt-5" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" >
            <div class="py-1 shadow" role="none">
                <h5 class="font-semibold text-gray-900 block px-4 py-2 text-lg " role="menuitem" tabindex="-1" >Filters</h5>
            </div>
            <div class="py-1 shadow px-4 " role="none">
                <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">PRICE</label>
<input id="steps-range" type="range" min="0" max="4" value="2.5" step="0.5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">
  
<form method="get" action="/s" class="py-2"> 
    <div class=" w-full flex">
    <div class="w-1/2">
 <span class="absolute text-gray-500">₹</span>
 <input type="number"  id="low-price" placeholder="Min" name="low-price" class="w-full pl-3">
</div><div class="w-1/2">
 <span class="absolute text-gray-500">₹</span>
 <input type="number" id="high-price" placeholder="Max" name="high-price" class="w-full pl-3">
</div>
</div>
 <button type="submit" class="text-xs px-2 py-1 border rounded-lg mt-2">GO</button>
</form>
                
            </div>
            <div class="py-1 shadow px-4 " role="none">
                <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">BRAND</label>
                <div class="flex items-center mb-4 group">
                    <input id="Brand-1" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    <label for="Brand-1" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Polylab</label>
                </div>
                <div class="flex items-center mb-4 group">
                    <input id="Brand-2" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    <label for="Brand-2" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Borosil</label>
                </div>
                <div class="flex items-center mb-4">
                    <input id="Brand-3" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    <label for="Brand-3" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Merk</label>
                </div>
                <div class="flex items-center mb-4">
                    <input id="Brand-4" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    <label for="Brand-4" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Tarson</label>
                </div>
                <div class="flex items-center mb-4">
                    <input id="Brand-5" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    <label for="Brand-5" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Thermofisher</label>
                </div>
                </div>
                <div class="py-1 shadow px-4 " role="none">
                    <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">CUSTOMER RATING</label>
                    <div class="flex items-center mb-4">
                        <input id="rating-1" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="rating-1" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">4★ & above</label>
                    </div>
                    <div class="flex items-center mb-4 hover:text-gray-900">
                        <input id="rating-2" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="rating-2" class="ml-2 text-sm font-medium text-gray-500 ">3★ & above</label>
                    </div>
                    <div class="flex items-center mb-4">
                        <input id="rating-3" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="rating-3" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">2★ & above</label>
                    </div>
                    <div class="flex items-center mb-4">
                        <input id="rating-4" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="rating-4" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">1★ & above</label>
                    </div>
                  
                    </div>
                    <div class="py-1 shadow px-4 " role="none">
                        <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">DISCOUNT</label>
                        <div class="flex items-center mb-4">
                            <input id="discount-1" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="discount-1" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">50% & more</label>
                        </div>
                        <div class="flex items-center mb-4">
                            <input id="discount-2" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="discount-2" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">40% & more</label>
                        </div>
                        <div class="flex items-center mb-4">
                            <input id="discount-3" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="discount-3" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">30% & more</label>
                        </div>
                        <div class="flex items-center mb-4">
                            <input id="discount-4" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="discount-4" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">20% & more</label>
                        </div>
                        <div class="flex items-center mb-4">
                            <input id="discount-5" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="discount-5" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">10% & below</label>
                        </div>
                      
                        </div>
            
            

          </div>
      </div>
</div>

    <% if(products.length<=0){%>
        <div  class="flex justify-center mb-10 "> 
            <div class=" float-left flex items-center justify-center h-scree">
            <h1 style="font-family: 'Bangers', cursive; font-size: 50px;" >well it's awkward <br/><span style="color: #695CFE;"> products </span>not found</h1>
                </div>
            <lottie-player  src="https://assets5.lottiefiles.com/private_files/lf30_3X1oGR.json"  background="transparent"  speed="1"  style="width: 500px; height: 500px;"  loop  autoplay></lottie-player>
        </div>
        
     <%}else{%>
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 col-gap-12 row-gap-16">
        <% products.forEach((product)=> { %>
            <div class="flex flex-col items-center gap-2 px-2 py-6  relative hover:shadow-lg">
                <a href="/productDetails/<%= product._id %>/<%= product.product._id %>/1"
                    class="flex flex-col items-center text-center group">
                    <div class="w-36 h-36">
                        <img draggable="false" class="w-full h-full object-contain"
                            src="/img/<%= product.product.image %>" alt="<%= product.product.name %>" />
                    </div>
                    <h2 class="text-sm mt-4 group-hover:text-blue-500">
                        <%= product.product.name %> - <%= product.name %>
                    </h2>
                    <span class="text-gray-400 text-xs ">Brand: <%= product.brand.name %></span>

                    <div class="flex flex-col gap-2 items-center">

                        <% if(user){ %>
                            <div class="flex items-center gap-3 m-1 text-md font-medium p-3">
                                <span>₹<%= product.price * product.piecePerPack %> <span class="text-xs">/ pack</span></span>
                                <span class="text-gray-500 line-through text-xs">₹699</span>
                                <span class="text-xs text-lime-500 pt-1"><%= product.brand.discount %>%&nbsp;off</span>
                            </div>
                        <% } %>

                    </div>
                </a>
            </div>
            <% }) %>
    </div>
    <div class="bg-white px-4 py-3 flex items-center justify-center border-t border-gray-200 sm:px-6">
        <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-center">
            <div>
                <div class="flex justify-center">
                    <% if (pages> 0) { %>
                        <nav aria-label="Page navigation example">
                            <ul class="flex list-style-none">
                                <% if (current==1) { %>
                                    <li class="page-item active disabled"><a
                                            class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-500 pointer-events-none focus:shadow-none"
                                            href="#" tabindex="-1" aria-disabled="true">Previous</a></li>
                                    <% } else { %>
                                        <li class="page-item active"><a
                                                class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                href="/allcategory/products/<%= category._id %>/<%= current-1 %>">Previous</a>
                                        </li>
                                        <% } %>
                                            <% var i=(Number(current)> 3 ? Number(current) - 2 : 1) %>
                                                <% if (i !==1) { %>
                                                    <li class="page-item disabled"><a
                                                            class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                            href="#">...</a></li>
                                                    <% } %>
                                                        <% for (; i <=(Number(current) + 2) && i <=pages; i++) { %>
                                                            <% if (i==current) { %>
                                                                <li class="page-item activeList"><a
                                                                        class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                        href="#">
                                                                        <%= i %>
                                                                    </a></li>
                                                                <% } else { %>
                                                                    <li class="page-item"><a
                                                                            class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                            href="/allcategory/products/<%= category._id %>/<%= i %>">
                                                                            <%= i %>
                                                                        </a></li>
                                                                    <% } %>
                                                                        <% if (i==Number(current) + 2 && i < pages) { %>
                                                                            <li class="page-item disabled"><a
                                                                                    class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                                    href="#">...</a></li>
                                                                            <% } %>
                                                                                <% } %>
                                                                                    <% if (current==pages) { %>
                                                                                        <li class="page-item disabled">
                                                                                            <a class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                                                href="#">Next</a>
                                                                                        </li>
                                                                                        <% } else { %>
                                                                                            <li class="page-item"><a
                                                                                                    class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                                                    href="/allcategory/products/<%= category._id %>/<%= parseInt(current)+1 %>">Next</a>
                                                                                            </li>
                                                                                            <% } %>
                            </ul>
                        </nav>
                        <% } %>
                </div>
            </div>
        </div>
    </div>

    <%}%>
</section>
<script>


    $('#sort-menu-button').click(function(){

        $('#sortDrop').toggleClass('hidden')
        $('#FilterDrop').addClass('hidden')

    })


    $('#menu-item-0,#menu-item-1,#menu-item-2,#menu-item-3,#menu-item-4').click(function(){
        $('#sortDrop').toggleClass('hidden')

    })


    $('#filter-menu-button').click(function(){

       $('#FilterDrop').toggleClass('hidden')
       $('#sortDrop').addClass('hidden')
    })
</script>